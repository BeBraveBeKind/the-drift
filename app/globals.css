@tailwind base;
@tailwind components;
@tailwind utilities;

/* Critical CSS - Prevent layout shift on initial load */
html {
  /* Prevent font size adjustments in iOS Safari */
  -webkit-text-size-adjust: 100%;
  /* Smooth scrolling */
  scroll-behavior: smooth;
}

/* Reserve space for images to prevent CLS */
img {
  max-width: 100%;
  height: auto;
  display: block;
}

/* Prevent FOUC and layout shift */
.board-card-polaroid__image-wrapper {
  position: relative;
  aspect-ratio: 4/3;
  background: #f3f4f6;
  overflow: hidden;
}

/* Navigation placeholder to prevent jump */
.nav-placeholder {
  height: 64px;
  background: transparent;
}

/* Font loading optimization */
.font-quicksand {
  font-family: 'Quicksand', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  font-display: swap;
}

@layer base {
  :root {
    /* Backgrounds */
    --bg-page: #F5F0E8;        /* Warm off-white, like aged paper */
    --bg-card: #FFFFFF;        /* Pure white cards for contrast */
    --bg-elevated: #FFFDF9;    /* Slightly warm white for modals/tooltips */
    
    /* Cork accent (use sparingly) */
    --cork: #C9A66B;           /* For subtle borders or small accents only */
    --cork-dark: #8B7355;      /* For text on cork if needed */
    
    /* Text */
    --text-primary: #1A1A1A;   /* Near-black, high contrast */
    --text-secondary: #4A4A4A; /* Dark gray for meta info */
    --text-muted: #6B6B6B;     /* Medium gray - use sparingly, never for important info */
    
    /* Interactive */
    --link: #2563EB;           /* Blue, not purple. Familiar. */
    --link-hover: #1D4ED8;     /* Darker on hover */
    --accent: #DC2626;         /* Red for primary actions, active states */
    --accent-hover: #B91C1C;
    
    /* Utility */
    --border: #D1D5DB;         /* Light gray borders */
    --border-strong: #9CA3AF;  /* Darker borders for emphasis */
    --success: #059669;
    --warning: #D97706;
  }
  
  /* System font stack for optimal readability */
  body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    font-size: 1.0625rem;  /* 17px base */
    line-height: 1.5;
    color: var(--text-primary);
    background-color: var(--bg-page);
  }
  
  /* Typography scale */
  .text-display { 
    font-size: 1.75rem; 
    font-weight: 700; 
    line-height: 1.2; 
  }
  
  .text-heading { 
    font-size: 1.375rem; 
    font-weight: 600; 
    line-height: 1.3; 
  }
  
  .text-subhead { 
    font-size: 1.125rem; 
    font-weight: 600; 
    line-height: 1.4; 
  }
  
  .text-body { 
    font-size: 1.0625rem; 
    font-weight: 400; 
    line-height: 1.5; 
  }
  
  .text-caption { 
    font-size: 0.9375rem; 
    font-weight: 400; 
    line-height: 1.4; 
    color: var(--text-secondary); 
  }
  
  .text-small { 
    font-size: 0.8125rem; 
    font-weight: 500; 
    line-height: 1.4; 
  }
  
  /* Link styles */
  a {
    color: var(--link);
    text-decoration: none;
    font-weight: 500;
  }
  
  a:hover {
    color: var(--link-hover);
  }
  
  /* Only underline inline text links, not navigation */
  p a, li a, .content a {
    text-decoration: underline;
  }
  
  /* Don't apply EXIF orientation - images are already rotated server-side */
  img {
    image-orientation: none;
  }
  
  /* Optimize rendering performance */
  * {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
  
  /* Prevent layout shifts */
  .board-card-polaroid {
    contain: layout;
  }
  
  /* GPU acceleration for transforms - only on hover */
  .board-card-polaroid:hover {
    transform: scale(1.03);
  }
  
  /* Font display optimization */
  @font-face {
    font-display: swap;
  }
  
  /* Prevent layout shifts from dynamic content */
  .min-h-screen {
    min-height: 100vh;
    min-height: 100dvh;
  }
}

@layer components {
  /* Button styles */
  .btn-primary {
    background: var(--accent);
    color: white;
    font-size: 1rem;
    font-weight: 600;
    padding: 12px 24px;
    min-height: 48px;
    border-radius: 8px;
    border: none;
    cursor: pointer;
    transition: background 0.15s;
    display: inline-flex;
    align-items: center;
    justify-content: center;
  }
  
  .btn-primary:hover { 
    background: var(--accent-hover); 
  }
  
  .btn-primary:active { 
    transform: scale(0.98); 
  }
  
  .btn-secondary {
    background: var(--bg-card);
    color: var(--text-primary);
    font-size: 0.9375rem;
    font-weight: 500;
    padding: 10px 20px;
    min-height: 44px;
    border-radius: 8px;
    border: 1px solid var(--border-strong);
    cursor: pointer;
    transition: border-color 0.15s, background 0.15s;
    display: inline-flex;
    align-items: center;
    justify-content: center;
  }
  
  .btn-secondary:hover {
    border-color: var(--text-secondary);
    background: var(--bg-elevated);
  }
  
  .btn-text {
    background: none;
    border: none;
    color: var(--link);
    font-size: 1rem;
    font-weight: 600;
    padding: 12px 8px;
    min-height: 44px;
    cursor: pointer;
    text-decoration: none;
    display: inline-flex;
    align-items: center;
  }
  
  .btn-text:hover { 
    color: var(--link-hover);
    text-decoration: underline;
  }
  
  /* Polaroid Card styles */
  .board-card-polaroid {
    display: block;
    transition: transform 0.2s ease;
    width: 100%;
    max-width: 240px;
    margin: 0 auto;
  }
  
  .board-card-polaroid:hover {
    transform: scale(1.03);
  }
  
  .board-card-polaroid__frame {
    background: white;
    padding: 8px 8px 12px 8px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.15);
    border-radius: 2px;
    display: flex;
    flex-direction: column;
  }
  
  .board-card-polaroid__image-wrapper {
    width: 100%;
    aspect-ratio: 4/3;
    overflow: hidden;
    background: #f5f5f5;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  
  .board-card-polaroid__image {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }
  
  .board-card-polaroid__image--placeholder {
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--bg-page);
  }
  
  .board-card-polaroid__content {
    padding: 12px 4px 4px;
    text-align: center;
    flex-grow: 1;
    display: flex;
    flex-direction: column;
    justify-content: center;
  }
  
  .board-card-polaroid__title {
    font-size: 0.9375rem;
    font-weight: 600;
    color: var(--text-primary);
    margin: 0 0 2px 0;
    line-height: 1.2;
    overflow: hidden;
    text-overflow: ellipsis;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
  }
  
  .board-card-polaroid__category {
    font-size: 0.75rem;
    color: var(--text-muted);
    margin: 2px 0 4px 0;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.02em;
  }
  
  .board-card-polaroid__meta {
    font-size: 0.8125rem;
    color: var(--text-secondary);
    margin: 0;
  }
  
  /* Filter pills */
  .filter-group {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
    padding: 8px 0;
  }
  
  .filter-pill {
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: 20px;
    padding: 10px 18px;
    min-height: 44px;
    font-size: 0.9375rem;
    font-weight: 500;
    color: var(--text-secondary);
    cursor: pointer;
    transition: all 0.15s;
    display: flex;
    align-items: center;
    gap: 6px;
  }
  
  .filter-pill:hover {
    border-color: var(--border-strong);
    color: var(--text-primary);
  }
  
  .filter-pill--active {
    background: var(--text-primary);
    border-color: var(--text-primary);
    color: white;
  }
}
